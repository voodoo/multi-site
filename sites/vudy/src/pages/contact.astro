---
import BaseLayout from '../../shared/layouts/BaseLayout.astro';
import Header from '../../shared/components/Header.astro';
import Footer from '../../shared/components/Footer.astro';

const siteName = 'Voody';
const nav = [
  { label: 'Home', href: './' },
  { label: 'Contact', href: './contact/' },
];
---

<BaseLayout title="Contact - Paul Vudmaska" description="Get in touch with Paul.">
  <Header slot="header" siteName={siteName} nav={nav} />

  <h1>Let's Talk</h1>

  <article class="content">
    <form class="contact-form" id="contactForm">
      <div class="form-group">
        <label for="name">Your Name</label>
        <input type="text" id="name" name="name" required />
      </div>

      <div class="form-group">
        <label for="email">Your Email</label>
        <input type="email" id="email" name="email" required />
      </div>

      <div class="form-group">
        <label for="message">Message</label>
        <textarea id="message" name="message" rows="6" required placeholder="What's on your mind?"></textarea>
      </div>

      <button type="submit" class="submit-button">Send</button>
      <div id="status" class="status-message"></div>
    </form>
  </article>

  <Footer slot="footer" copyright="Â© 2026 Voody." />
</BaseLayout>

<script>
  const form = document.getElementById('contactForm');
  const statusDiv = document.getElementById('status');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    statusDiv.textContent = 'Sending...';
    statusDiv.className = 'status-message sending';

    const formData = new FormData(form);
    const data = {
      name: formData.get('name'),
      email: formData.get('email'),
      message: formData.get('message'),
    };

    try {
      const response = await fetch('/send-email', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });

      if (response.ok) {
        statusDiv.textContent = 'Message sent! Thanks for reaching out.';
        statusDiv.className = 'status-message success';
        form.reset();
      } else {
        const error = await response.text();
        statusDiv.textContent = 'Error sending message. Please try again.';
        statusDiv.className = 'status-message error';
      }
    } catch (error) {
      statusDiv.textContent = 'Error sending message. Please try again.';
      statusDiv.className = 'status-message error';
    }
  });
</script>

<style>
  h1 {
    text-align: center;
    margin-bottom: 2rem;
    font-size: 2.5rem;
  }

  .content {
    max-width: 600px;
    margin: 0 auto;
  }

  .contact-form {
    background: #f9f9f9;
    padding: 2rem;
    border-radius: 8px;
    border: 2px solid #3498db;
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #3498db;
  }

  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e0e0e0;
    border-radius: 4px;
    font-size: 1rem;
    font-family: inherit;
    transition: all 0.2s;
    box-sizing: border-box;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
  }

  .submit-button {
    width: 100%;
    padding: 1rem;
    background: #3498db;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .submit-button:hover {
    background: #2980b9;
  }

  .status-message {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 4px;
    text-align: center;
    display: none;
  }

  .status-message.sending {
    display: block;
    background: #ecf0f1;
    color: #2c3e50;
  }

  .status-message.success {
    display: block;
    background: #d5f4e6;
    color: #27ae60;
  }

  .status-message.error {
    display: block;
    background: #fadbd8;
    color: #c0392b;
  }
</style>
